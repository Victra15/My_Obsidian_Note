## 과제 1. OpenStack 기반 Private Cloud 기본 설계서

### ### ✅ 설계 목적 및 요구사항

1. **프라이빗 클라우드 특화 요구사항**
    
    - **고객 요구 기반 맞춤형 설계 및 책임 분리 구조**: 프라이빗 클라우드는 퍼블릭 클라우드와 달리, 인프라 설계와 보안 정책 수립에 있어 고객의 요구사항이 실질적으로 시스템 구성에 반영됩니다. 클라우드 제공자(설계자, 운영자)는 고객의 업무 목적, 보안 등급, 외부 통신 여부, 자원 성능 기준 등을 반영하여 아키텍처를 구성하며, 이를 통해 고객 중심의 유연한 인프라 설계가 가능합니다. 또한 실제 인프라 운영 및 보안 정책 제어권은 클라우드 제공자가 가지되, 설계 방향은 고객의 요구에 따라 정의됩니다. 즉, 권한은 제공자가 가지되, 방향성과 기준은 고객이 설정하는 구조입니다. 이를 통해 접근제어, 네트워크 분리, 인증 정책, 감사 로그 등의 항목이 고객 맞춤형으로 설정될 수 있습니다.
        
    
    프라이빗 클라우드는 특정 고객의 업무 목적, 보안 요구, 성능 기준에 따라 아키텍처 자체를 맞춤 설계할 수 있는 유연성을 가집니다. 다음은 대표적인 고객 맞춤 설계 항목입니다:
    
    - **목적별 네트워크 구성**: 내부망 전용 고객은 Floating IP 제외, 외부 서비스 운영 고객은 외부 접속 허용 및 보안 게이트웨이 구성
        
    - **보안 등급별 차등 설계**: 중요 정보 취급 고객을 위한 이중 인증, 접근 제어 강화, 감사 로그 주기화 등
        
    - **자원 성능 요구 기반 확장**: GPU 노드, 고성능 디스크, IOPS 보장 스토리지 등 성능 특화 옵션 제공
        
    - **운영 정책 맞춤화**: HA 구성, 백업 주기, 오토스케일 조건 등 고객별 운영 정책 반영
        
    - **네트워크 분리 수준 조절**: VXLAN 기반 논리 분리 또는 VLAN 기반 물리 분리 설정 지원
        
    
    이러한 맞춤형 인프라 설계는 프라이빗 클라우드가 단순한 가상 자원 제공이 아니라, 고객의 **업무 인프라 요구를 충족하는 통합 시스템**임을 보여주는 주요 요소입니다.
    
2. **기본 인프라 고려 사항**
    
    - **고가용성(HA)**: 컨트롤 플레인 다중화, 메시지 큐 및 DB 이중화
        
    - **확장성**: 노드 수평 확장 구조, 네트워크 및 스토리지 스케일아웃
        
    - **모듈화**: 필요한 컴포넌트만 선택적으로 구성 가능
        
    - **모니터링/로그 수집**: Prometheus, Grafana, ELK 등 연동
---

### 🧩 기본 노드 구성


| 노드 종류   | 주요 기능 구성                            | 개수(예시) |
| ------- | ----------------------------------- | ------ |
| 컨트롤러 노드 | API 서버, 스케줄러, DB, Keystone, Horizon | 3대     |
| 컴퓨트 노드  | 가상머신(VM) 실행, Nova-compute           | 3~N대   |
| 네트워크 노드 | L3 라우터, DHCP, Metadata 서비스          | 1~2대   |
| 스토리지 노드 | Cinder(블록 스토리지), Swift(오브젝트)        | 2대 이상  |

> [!Comment] 컨트롤러 노드를 3대로 구성한 이유
> 컨트롤러 노드를 3대로 구성하는 이유는, 시스템의 정상 동작 여부를 과반수(정족수)로 판단하기 위한 최소 조건(2대 이상)을 만족시키기 위함입니다. 이는 네트워크 장애로 클러스터가 둘 이상의 통신 그룹으로 분리(split)될 수 있는 상황에서, 여러 그룹이 동시에 잘못 동작하는 split-brain 현상을 방지하기 위한 구조적 안전장치입니다.

#### 📎 노드별 운영체제 요구사항 요약

| 노드 종류       | 주요 OS 요구사항                                        | 권장 배포판                                   |
| ----------- | ------------------------------------------------- | ---------------------------------------- |
| **컨트롤러 노드** | Python 및 systemd 기반, LTS 안정성, 최신 OpenStack 패키지 호환 | Ubuntu 20.04+/22.04 LTS, RHEL 9, Rocky 9 |
| **컴퓨트 노드**  | KVM/VT-x/AMD-V 지원, libvirt/QEMU 호환, 가상화 커널 지원 필수  | Ubuntu LTS, RHEL/CentOS 기반 배포판           |
| **네트워크 노드** | OVS/OVN 커널 모듈 지원, 최신 NIC 드라이버 및 커널 모듈             | Ubuntu LTS, RHEL 계열, kernel 5.x 이상       |
| **스토리지 노드** | Ceph/LVM/iSCSI/Swift 관련 드라이버 및 대용량 디스크 지원         | Ubuntu, RHEL 계열 (Ceph 최적화된 배포판)          |
> [!Comment] 각 노드별 OS 선택 이유
> - **Ubuntu LTS / RHEL / Rocky** 같은 배포판은 OpenStack 공식 리포지터리나 커뮤니티에서 **지속적으로 패키지 테스트와 보안 패치**가 이뤄집니다.
> - 컴퓨트 노드는 **하이퍼바이저 호환성(KVM 등)** 이 중요하므로, libvirt 안정성 및 가상화 커널 모듈이 잘 관리되는 배포판이 필요합니다.
> - 네트워크 노드는 **NIC 드라이버, 커널 모듈(DPDK, OVS)** 등이 중요하므로 최신 커널을 지원하면서도 네트워크 튜닝이 쉬운 OS가 필요합니다.
> - 스토리지 노드는 **Ceph, LVM, iSCSI** 등 I/O 중심 서비스가 주이므로, 관련 스토리지 드라이버와 디스크 마운트 구조가 안정적인 배포판이 필수입니다.
> - 컨트롤러는 서비스 밀도가 높아 안정성과 보안성이 중요한데, 이는 대부분 **LTS 기반의 서버 OS**가 적합합니다.

---

### ### 🧱 주요 OpenStack 컴포넌트 설명

|                   |                                         |
| ----------------- | --------------------------------------- |
| 컴포넌트              | 역할 설명                                   |
| **Keystone**      | 인증 및 권한 관리 (토큰 기반)                      |
| **Glance**        | 가상머신 이미지 저장 및 배포                        |
| **Nova**          | VM 생성 및 관리 (Compute)                    |
| **Neutron**       | 가상 네트워크 생성, 서브넷/VLAN/VXLAN 관리, 보안 정책 관리 |
| **Cinder**        | 블록 스토리지 서비스 제공 (VM 디스크 등)               |
| **Swift**         | 오브젝트 스토리지 (백업, 로그 등 저장)                 |
| **Horizon**       | 웹 기반 관리 콘솔 (Dashboard)                  |
| **Heat**          | 인프라 자동화 템플릿 (IaaS 오케스트레이션)              |
| **Barbican**      | 비밀 관리(Key/Certificate Vault) - 필요 시     |
| **Message Queue** | 컴포넌트 간 비동기 메시지 전달 (RabbitMQ 등)          |
| **Database**      | 상태 저장용 DB (MariaDB, Galera 등)           |

---

### 🧱 주요 OpenStack 컴포넌트 설명 (노드별 분류)

#### 📌 컨트롤러 노드

- **공통 컴포넌트**
    
    - **Keystone**: 인증 및 권한 관리 (토큰 기반)
        
    - **Glance**: 가상머신 이미지 저장 및 배포
        
    - **Horizon**: 웹 기반 대시보드
        
    - **Heat**: 인프라 자동화 템플릿 관리 (Orchestration)
        
    - **Barbican** (선택): Key/Certificate 보안 비밀 저장소
        
    - **Database (MariaDB/Galera)**: 상태 정보 저장 (모든 컴포넌트 의존)
        
    - **Message Queue (RabbitMQ)**: 컴포넌트 간 메시지 전달
        
- **Neutron 네트워크 컨트롤 컴포넌트**
    
    - **neutron-server**: 네트워크 API 처리 및 플러그인 관리
        
    - **ML2 Plugin / OVN Plugin**: SDN, L2 연결 구성 관리
        

#### 📌 컴퓨트 노드

- **Nova 컴퓨트 컴포넌트**
    
    - **nova-compute**: VM 실행 및 하이퍼바이저 제어 (KVM 등)
        
- **Neutron L2 Agent**
    
    - **Open vSwitch Agent / OVN Controller**: 가상 스위치 및 브릿지 구성
        

#### 📌 네트워크 노드 (또는 네트워크 기능 포함 노드)

- **Neutron L3 및 서비스 에이전트**
    
    - **L3 Agent**: 라우팅 및 SNAT/DNAT 처리
        
    - **DHCP Agent**: 테넌트 네트워크별 DHCP 서버 구성
        
    - **Metadata Agent**: 인스턴스 메타데이터 전달 (nova-api 연동)
        
    - **FWaaS/LBaaS/VPN Agent** (선택): 방화벽, 로드밸런서, VPN 구성 요소
        

#### 📌 스토리지 노드

- **Cinder 컴포넌트 (블록 스토리지)**
    
    - **cinder-volume**: 볼륨 생성 및 관리
        
    - **cinder-scheduler**: 적절한 백엔드 선택
        
    - **cinder-backup** (선택): 볼륨 백업 기능
        
- **Swift 컴포넌트 (오브젝트 스토리지)**
    
    - **swift-proxy**: 외부 API 요청 처리
        
    - **swift-account / container / object**: 데이터 저장 구성요소
        

> 각 컴포넌트는 독립적인 서비스로 운영되며, 규모 및 목적에 따라 노드 간 통합 또는 분리 배치가 가능합니다.
---

### 🔄 기본 구성도 설명 (텍스트 기반)

1. **사용자는 Horizon 또는 OpenStack CLI로 Keystone을 통해 인증 요청.**
    
2. **Nova가 VM 스케줄링 및 실행 요청 수행, Glance에서 이미지 로드.**
    
3. **Neutron이 가상 네트워크/VLAN/VXLAN을 할당하고 외부 연결 설정.**
    
4. **Cinder를 통해 VM에 블록 디바이스 마운트.**
    
5. **Swift를 통해 백업 데이터 및 로그 보관.**
    

---

### 💡 직무 맞춤 추가 고려 사항

현대오토에버 Private Cloud 네트워크 엔지니어 JD 기반으로 다음과 같은 확장 구성 필요:

1. **SDN 연동**: Neutron + Open vSwitch 또는 OVN 기반 SDN 설계
    
2. **VXLAN 기반 멀티 테넌시 지원**: 테넌트 간 네트워크 분리
    
3. **네트워크 보안 정책 구성**: Security Group, ACL 구성 및 방화벽 연동
    
4. **네트워크 성능 모니터링**: Telemetry(ceilometer) + 외부 모니터링 도구
    
5. **CCS(Connected Car Service) 연동 고려**: API Gateway + 메시징(MQTT 등) 구성 연계 가능성 고려
    

---

### 📦 추가 구성도 (심화 버전)

- **SDN Controller 연동**: OpenDaylight / ONOS 등과의 연계 가능성 검토
    
- **LBaaS 구성**: 서비스 간 부하 분산 필요 시 Octavia 사용 고려
    
- **VPN 또는 Bastion 구성**: 외부 운영자를 위한 보안 접속 허브 구성
    
- **모니터링 통합**: Prometheus + Grafana + Alertmanager
    

---

### ✅ 요약

- OpenStack 기반 프라이빗 클라우드는 멀티테넌시, 보안성, 통제성을 우선적으로 고려한 설계 필요
    
- 기본 구성은 컨트롤러/컴퓨트/네트워크/스토리지 노드로 구성
    
- 현대오토에버의 CCS 및 글로벌 운영 목표를 고려해 SDN, VXLAN, 보안, 성능 모니터링까지 통합 설계 필요